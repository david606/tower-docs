# [Utils 通用工具类](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#utils-通用工具类)

该工具类主要用于对字符串的一些常规截取字符串、验证邮箱或手机号格式等操作。

### [基本使用](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#基本使用)

- 通过`ctGetData`属性获取系统时间
- 通过`ctDesensitizationOfName`属性设置姓名脱敏
- 通过`ctDesensitizationOfPhone`属性设置手机号脱敏
- 通过`ctCutString`属性截取字符串

```vue
<template>
	<view class="demo-page">
		<ct-demo-card title="姓名脱敏" class="mb">
			<ct-ui-input v-model="name" placeholder="输入姓名" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('name')" foneSize="14">姓名脱敏</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="手机号脱敏" class="mb">
			<ct-ui-input v-model="phone" placeholder="输入手机号" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('phone')" foneSize="14">手机号脱敏</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="身份证号脱敏" class="mb">
			<ct-ui-input v-model="idCard" placeholder="输入身份证号" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('idCard')" foneSize="14">身份证号脱敏</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="字符串数据异常转换" class="mb">
			<view class="mb">当字符串数据为null/undefined/空字符串时</view>
			<ct-ui-button btnType="confirm" @click="transfer('handle')" foneSize="14">字符串数据异常转换</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="截取字符串" class="mb">
			<ct-ui-input v-model="cutString" placeholder="输入要截取的字符串" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-input v-model="cutL" placeholder="输入要截取的字节长度" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('cutString')" foneSize="14">截取字符串</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="验证电子邮箱格式" class="mb">
			<ct-ui-input v-model="checkMail" placeholder="输入电子邮箱" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('checkMail')" foneSize="14">验证电子邮箱格式</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="验证手机格式" class="mb">
			<ct-ui-input v-model="checkPhone" placeholder="输入手机号" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button btnType="confirm" @click="transfer('checkPhone')" foneSize="14">验证手机格式</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="获取数据类型" class="mb">
			<text v-html="data4Type" class="mb"></text>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('checkType')" foneSize="14">获取数据类型
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="对象的克隆" class="mb">
			<text v-html="data4Obj" class="mb"></text>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('deepClone')" foneSize="14">对象的克隆
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="对象的合并" class="mb">
			<text v-html="data4Merge" class="mb"></text>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('deepMerge')" foneSize="14">对象的合并
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="获取系统时间" class="mb">
			<view class="demo-row">
				<view class="demo-row-sel" @click="sel('time')">
					<view class="demo-row-sel-l">选择时间类型</view>
					<view class="demo-row-sel-r">{{timeTypeObj.value}}</view>
					<image class="demo-row-sel-img" src="../../static/images/ct_arrows.png"></image>
				</view>
			</view>
			<ct-ui-button btnType="confirm" class='btnSyle' @click="transfer('time')" foneSize="14">获取系统时间
			</ct-ui-button>
			<ct-ui-selector ref="selector" :mode="selector.mode" :title="selector.title" :datas="selector.datas"
				@ctSelectorConfirm="ctSelectorConfirm">
			</ct-ui-selector>
		</ct-demo-card>
		<ct-demo-card title="替换字符串" class="mb">
			<text class="mb">{{data4Replace1}},{{data4Replace2}},{{data4Replace3}}</text>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('replace')" foneSize="14">替换字符串
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="对象转url查询字符串参数" class="mb">
			<text v-html="data4TransformS" class="mb"></text>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('transformS')" foneSize="14">查询
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="查询字符串转对象" class="mb">
			<text v-html="data4TransformJ" class="mb" style="display: block;"></text>
			<view v-if="data4TransformJResult" class="mb">转换结果：{{ data4TransformJResult }}</view>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('transformJ')" foneSize="14">查询
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="取随机数，如果value小于min，取min；如果value大于max" class="mb">
			<text class="mb" style="display: block;">{{randomMin}}-{{randomMax}}</text>
			<ct-ui-input v-model="dataRange" placeholder="输入数字" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('dataRange')" foneSize="14">获取随机数
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="取一个区间数" class="mb">
			<ct-ui-input v-model="dataRandom" placeholder="输入数字" borderStyle="border" class="mb"></ct-ui-input>
			<ct-ui-button class='btnSyle' btnType="confirm" @click="transfer('dataRandom')" foneSize="14">获取区间数
			</ct-ui-button>
		</ct-demo-card>
		<ct-demo-card title="更换主题" class="mb">
			<ct-ui-switch v-model="swit" :switchContent="switchContent" @change="transfer('theme')"></ct-ui-switch>
		</ct-demo-card>
	</view>
</template>

<script>
	var _self;
	export default {
		data() {
			return {
				selector: {
					mode: '',
					title: '',
					datas: []
				},
				timeTypeObj: {},
				timeTypeDatas: [],
				name: '王大锤',
				phone: '15012345678',
				idCard: '211481202002021234',
				cutString: 'abcd',
				cutL: 2,
				checkMail: '15012345678@163.com',
				checkPhone: '15012345678',
				checkType: {
					num: 1,
					str: '铁塔集团',
					bool: true,
					nul: null,
					f: function() {},
					arr: [1, 2],
					obj: {
						a: 1
					}
				},
				randomMin: 1,
				randomMax: 100,
				dataRange: 22,
				dataRandom: '1,100',
				data4Replace1: 'hello',
				data4Replace2: 'e',
				data4Replace3: 'a',
				data4TransformS: {
					a: 1,
					b: 2,
					c: 3
				},
				data4TransformJ: 'a=1&b=2&c=3',
				data4TransformJResult: '',
				data4Type: `数值类型：1 </br>
							字符串类型类型：铁塔集团</br>
							布尔类型：true</br>
							null类型：null</br>
							undefined类型：undefined</br>
							函数类型：function(){}</br>
							数组类型：[1,2]</br>
							对象类型：{a:1}
							`,
				obj4deep: {
					a: 1,
					b: {
						b1: 'b1',
						b2: ['b2', 'b3']
					},
					c: ['c1', 'c2']
				},
				data4Obj: `let obj = {</br>
					&nbsp;&nbsp;a:1,</br>
					&nbsp;&nbsp;b:{</br>
						&nbsp;&nbsp;&nbsp;&nbsp;b1:'b1',</br>
						&nbsp;&nbsp;&nbsp;&nbsp;b2:['b2','b3']</br>
					&nbsp;&nbsp;},</br>
					&nbsp;&nbsp;c:['c1','c2']</br>
				}`,
				obj4Merge: {
					a: 1,
					b: {
						b1: 'b1',
						b2: ['b2', 'b3']
					},
					c: 'c1'
				},
				data4Merge: `let target = {</br>
					&nbsp;&nbsp;a:1,</br>
					&nbsp;&nbsp;b:{</br>
						&nbsp;&nbsp;&nbsp;&nbsp;b1:'b1',</br>
						&nbsp;&nbsp;&nbsp;&nbsp;b2:['b2','b3']</br>
					&nbsp;&nbsp;},</br>
					&nbsp;&nbsp;c:''c1'</br>
					&nbsp;}</br>
					let source = {</br>
						&nbsp;&nbsp;asrc:1,</br>
						&nbsp;&nbsp;b:{</br>
							&nbsp;&nbsp;&nbsp;&nbsp;b1:'b1',</br>
							&nbsp;&nbsp;&nbsp;&nbsp;b2:['b2','b4']</br>
						&nbsp;&nbsp;},</br>
						&nbsp;&nbsp;c:['c1','c2']</br>
						&nbsp;&nbsp;dsrc:{d:'d1'}</br>
				}`,
				swit: false,
				switchContent : {
					type: 'text', // text icon
					position: 'sides', // sides centre
					active: '黑 black', //打开时： icon的name | text的文字
					inactive: '白 white',//关闭时： icon的name | text的文字
					color: '#3c9cff',
					closeColor: '#000'
				}
			}
		},
		onLoad() {
			_self = this;
			_self.setDatas()
		},
		methods: {
			setDatas() {
				_self.timeTypeDatas = [{
						value: 'yyyy-MM-dd hh:mm:ss',
						label: 'yyyy-MM-dd hh:mm:ss'
					},
					{
						value: 'yyyyMMddhhmmss',
						label: 'yyyyMMddhhmmss'
					},
					{
						value: 'yyyy-MM-dd',
						label: 'yyyy-MM-dd'
					},
					{
						value: 'yyyyMMdd',
						label: 'yyyyMMdd'
					},
					{
						value: 'yyyy-MM',
						label: 'yyyy-MM'
					},
					{
						value: 'yyyyMM',
						label: 'yyyyMM'
					},
					{
						value: 'MM-dd',
						label: 'MM-dd'
					},
					{
						value: 'MMdd',
						label: 'MMdd'
					},
					{
						value: 'yyyy',
						label: 'yyyy'
					},
					{
						value: 'MM',
						label: 'MM'
					},
					{
						value: 'dd',
						label: 'dd'
					},
					{
						value: 'hh:mm:ss',
						label: 'hh:mm:ss'
					},
					{
						value: 'hhmmss',
						label: 'hhmmss'
					},
					{
						value: 'hh:mm',
						label: 'hh:mm'
					},
					{
						value: 'hhmm',
						label: 'hhmm'
					},
					{
						value: 'mm:ss',
						label: 'mm:ss'
					},
					{
						value: 'mmss',
						label: 'mmss'
					},
					{
						value: 'hh',
						label: 'hh'
					},
					{
						value: 'mm',
						label: 'mm'
					},
					{
						value: 'ss',
						label: 'ss'
					}
				]
				_self.timeTypeObj = _self.timeTypeDatas[0]
			},
			ctSelectorConfirm(e) {
				_self.timeTypeObj = e.data[0];
			},
			sel(e) {
				if (e == 'time') {
					_self.selector.title = '时间类型';
					_self.selector.datas = _self.timeTypeDatas;
					_self.$refs.selector.show()
				}
			},
			transfer(e) {
				let t = ''
				let result = ''
				if (e == 'time') {
					t = '获取系统时间'
					result = _self.$ctmobile.utils.ctGetData(_self.timeTypeObj.value);
				} else if (e == 'name') {
					t = '姓名脱敏'
					result = _self.$ctmobile.utils.ctDesensitizationOfName(_self.name);
				} else if (e == 'phone') {
					t = '手机号脱敏'
					result = _self.$ctmobile.utils.ctDesensitizationOfPhone(_self.phone);
				} else if (e == 'idCard') {
					t = '身份证号脱敏'
					result = _self.$ctmobile.utils.ctDesensitizationOfIDCard(_self.idCard);
				} else if (e == 'handle') {
					t = '字符串数据异常转换'
					result = _self.$ctmobile.utils.ctHandleDatas(null);
				} else if (e == 'cutString') {
					t = '截取字符串'
					result = _self.$ctmobile.utils.ctCutString(_self.cutString, _self.cutL);
				} else if (e == 'checkMail') {
					t = '验证电子邮箱格式'
					result = _self.$ctmobile.utils.ctCheckOfEmail(_self.checkMail) ? '成功' : '失败'
				} else if (e == 'checkPhone') {
					t = '验证手机格式'
					result = _self.$ctmobile.utils.ctCheckOfMobile(_self.checkPhone) ? '成功' : '失败'
				} else if (e == 'checkType') {
					t = '获取数据类型'
					let a;
					result = '1是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['num']) + ' 类型\r\n' +
						'铁塔集团是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['str']) + ' 类型\r\n' +
						'true是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['bool']) + ' 类型\r\n' +
						'null是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['nul']) + ' 类型\r\n' +
						'undefined是：' + _self.$ctmobile.objUtils.ctType(a) + ' 类型\r\n' +
						'function(){}是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['f']) + ' 类型\r\n' +
						'[1,2]是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['arr']) + ' 类型\r\n' +
						'{a:1}是：' + _self.$ctmobile.objUtils.ctType(_self.checkType['obj4deep']) + ' 类型';
				} else if (e == 'deepClone') {
					t = '对象拷贝';
					result = '新对象newObj = ' + _self.$ctmobile.objUtils.strobj(_self.$ctmobile.objUtils.ctDeepClone(_self
						.obj4deep));
				} else if (e == 'deepMerge') {
					t = '对象合并';
					let source = {
						asrc: 1,
						b: {
							b1: 'b1',
							b2: ['b2', 'b4']
						},
						c: ['c1', 'c2'],
						dsrc: {
							d: 'd1'
						},
					}
					let nobj = _self.$ctmobile.objUtils.ctDeepMerge(_self.obj4Merge, source)
					result = '合并后对象为：' + _self.$ctmobile.objUtils.strobj(nobj);
				} else if (e == 'transformS') {
					t = '字符串参数';
					result = '字符串参数为：' + _self.$ctmobile.utils.obj2params(_self.data4TransformS);
				} else if (e == 'transformJ') {
					t = '对象参数';
					result = '对象参数为：' + _self.$ctmobile.utils.params2obj(_self.data4TransformJ);
					this.data4TransformJResult = JSON.stringify(_self.$ctmobile.utils.params2obj(_self.data4TransformJ))
					return
				} else if (e == 'dataRandom') {
					t = '区间数';
					let valueR = _self.dataRandom
					valueR = valueR.split(',').map(Number)
					result = '值：' + _self.$ctmobile.utils.random(valueR[0], valueR[1]);
				} else if (e == 'dataRange') {
					t = '随机数';
					result = '值：' + _self.$ctmobile.utils.range(_self.randomMin, _self.randomMax, _self.dataRange);
				} else if (e == 'replace') {
					t = '替换字符串';
					result = '值：' + _self.$ctmobile.utils.replace(_self.data4Replace1,_self.data4Replace2,_self.data4Replace3);
				} else if (e == 'theme') {
					t = '更换主题'
					result = _self.$ctmobile.utils.theme(_self.swit ? 'medical' : 'traffic');
				}

				_self.$ctmobile.dialog.alertConfirm({
					title: t,
					content: result
				})

			}
		}
	}
</script>

<style lang="scss">
	.demo {
		width: 100vw;
		padding-bottom: 100rpx;
	}

	.btnSyle {
		margin-top: 11px;
	}
</style>
```

### [获取系统时间API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#获取系统时间api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props)

| 参数   | 说明 | 类型   | 默认值              | 可选值 |
| ------ | ---- | ------ | ------------------- | ------ |
| format | 格式 | string | yyyy-MM-dd hh:mm:ss | —      |

### [姓名脱敏API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#姓名脱敏api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-1)

| 参数 | 说明 | 类型   | 默认值 | 可选值 |
| ---- | ---- | ------ | ------ | ------ |
| name | 姓名 | string | —      | —      |

### [手机号脱敏API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#手机号脱敏api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-2)

| 参数  | 说明   | 类型   | 默认值 | 可选值 |
| ----- | ------ | ------ | ------ | ------ |
| phone | 手机号 | string | —      | —      |

### [身份证号脱敏API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#身份证号脱敏api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-3)

| 参数   | 说明     | 类型   | 默认值 | 可选值 |
| ------ | -------- | ------ | ------ | ------ |
| idCard | 身份证号 | string | —      | —      |

### [字符串数据异常转换API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#字符串数据异常转换api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-4)

| 参数  | 说明   | 类型   | 默认值 | 可选值 |
| ----- | ------ | ------ | ------ | ------ |
| value | 字符串 | string | —      | —      |

### [截取字符串API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#截取字符串api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-5)

| 参数 | 说明             | 类型   | 默认值 | 可选值 |
| ---- | ---------------- | ------ | ------ | ------ |
| str  | 要截取的字符串   | string | —      | —      |
| L    | 要截取的字节长度 | number | 0      | —      |

### [验证电子邮箱格式API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#验证电子邮箱格式api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-6)

| 参数  | 说明     | 类型   | 默认值 | 可选值 |
| ----- | -------- | ------ | ------ | ------ |
| value | 电子邮箱 | string | —      | —      |

### [验证手机格式API](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#验证手机格式api)

#### [Props](http://mid.chinatowercom.cn:18080/appGuide/base/utils.html#props-7)

| 参数  | 说明   | 类型   | 默认值 | 可选值 |
| ----- | ------ | ------ | ------ | ------ |
| value | 手机号 | string | —      | —      |