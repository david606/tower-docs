# [文件上传下载](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#文件上传下载)

封装对文件进行上传、下载统一处理，同时提供实时进度监听。可中止正在处理的上传、下载进程。

### [基本使用](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#基本使用)

#### [文件批量上传](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#文件批量上传)

- 通过`uploadFiles`方法处理文件上传

```javascript
this.$ctmobile.file.uploadFiles({
  url: 'http://xxxx.xxx.com',
  name: 'file',
  type: 'image',
  isUp: true,
  count: 3,
  title: '图片上传中',
  onResponseFn: (res) => {
    console.log('Response 结果', res)
  },
  onProgress: (res) => {
    console.log('进度', res)
  },
  abort: (res) => {
    console.log('abort', res)
  }
})
```

#### [文件批量下载](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#文件批量下载)

- 通过`downloadFiles`方法处理文件下载

```javascript
this.$file.file.downloadFiles({
  urls: ['http://localhost:8080/api/download'],
  title: '文件下载中',
  type: 'image',
  onResponseFn: (res) => {
    console.log('Response 结果', res)
  },
  onProgress: (res) => {
    console.log('进度', res)
    const {progress, totalBytesWritten, totalBytesExpectedToWrite} = res
  },
  abort: (res) => {
    console.log('abort', res)
  }
}).catch(e => {
  console.log('err', e);
})
```

### [API](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#api)

#### [Upload Props](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#upload-props)

| 参数         | 说明                                                         | 类型          | 默认值                                              | 可选值               |
| ------------ | ------------------------------------------------------------ | ------------- | --------------------------------------------------- | -------------------- |
| url(必填)    | 开发者请求服务器 url 地址                                    | String        | -                                                   | -                    |
| files        | 需要上传的文件列表，如有值，则不弹起选择框。{files: [], filePaths: []} | Object        | -                                                   | -                    |
| type         | 上传类型                                                     | String        | all                                                 | image｜video｜all    |
| sizeType     | 指定是原图还是压缩图                                         | Array｜String | 'original', 'compressed'                            | original｜compressed |
| sourceType   | 来源                                                         | Array｜String | circle                                              | album｜camera        |
| extension    | 文件拓展名过滤                                               | Array｜String | -                                                   | -                    |
| isUp         | 是否上传到服务器                                             | Boolean       | false                                               | true｜false          |
| count        | 上传数量                                                     | Number        | -                                                   | -                    |
| title        | 提示标题                                                     | String        | -                                                   | -                    |
| name         | 文件对应的 key                                               | String        | file                                                | -                    |
| formData     | HTTP 请求中其他额外的 form data                              | Object        | -                                                   | -                    |
| header       | HTTP 请求 Header 头                                          | Object        | 'content-type': 'application/x-www-form-urlencoded' | -                    |
| timeout      | 超时时间，单位 ms                                            | Number        | -                                                   | -                    |
| onResponseFn | 上传完毕回调结果处理                                         | Function      | -                                                   | -                    |
| onProgress   | 实时上传进度回调函数                                         | Function      | -                                                   | -                    |
| abort        | 实时上传进度回调函数                                         | Function      | -                                                   | -                    |

#### [Download Props](http://mid.chinatowercom.cn:18080/appGuide/base/fileUploadDown.html#download-props)

| 参数         | 说明                                          | 类型     | 默认值 | 可选值            |
| ------------ | --------------------------------------------- | -------- | ------ | ----------------- |
| urls         | 需要下载的文件地址集合                        | Array    | -      | -                 |
| header       | HTTP 请求 Header, header 中不能设置 Referer。 | Object   | -      | -                 |
| timeout      | 超时时间，单位 ms                             | Number   | -      | -                 |
| type         | 下载类型                                      | String   | all    | image｜video｜all |
| title        | 提示标题                                      | String   | -      | -                 |
| onResponseFn | 下载完毕回调结果处理                          | Function | -      | -                 |
| onProgress   | 实时上传进度回调函数                          | Function | -      | -                 |
| abort        | 实时上传进度回调函数                          | Function | -      | -                 |