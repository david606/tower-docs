# [Scan 扫码](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#scan-扫码)

该组件主要用于二维码扫描操作。

### [基本使用](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#基本使用)

- 通过`@ctScanCode`参数设置允许从相机或相册扫码成功

```vue
<template>
	<view class="demo-page">
		<ct-demo-card title="允许从相机和相册扫码">
			<ct-ui-button @click="scan('scan')">扫码</ct-ui-button>
		</ct-demo-card>
		<ct-expand-scan ref="scan" @ctScanCode="ctScanCode" />
	</view>
</template>

<script>
	var _self;
	export default {
		data() {
			return {
				
			}
		},
		onLoad() {
			_self = this;
			
		},
		created() {
			// 通知
			uni.$on('demoScanApp',(res)=>{
				_self.$ctmobile.dialog.alertConfirm({
					title: '扫码成功',
					content: res
				})
			})
		},
		onUnload() {
			uni.$off('demoScanApp')
		},
		methods: {
			scan(e) {
					_self.$refs.scan.ctScanCode()
			},
			ctScanCode(e) {
				_self.$ctmobile.dialog.alertConfirm({
					title: '扫码成功',
					content: e.result
				})
			}
		}
	}
</script>

<style lang="scss">
</style>
```

### [只允许通过相机扫码](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#只允许通过相机扫码)

- 通过`@ctScanCodeOnlyFromCamera`参数设置只允许从相机扫码成功

```vue
<template>
	<view class="demo-page">
		<ct-demo-card title="只允许通过相机扫码">
			<ct-ui-button @click="scan('only')">扫码</ct-ui-button>
		</ct-demo-card>
		<ct-expand-scan ref="scan" @ctScanCodeOnlyFromCamera="ctScanCodeOnlyFromCamera" />
	</view>
</template>

<script>
	var _self;
	export default {
		data() {
			return {
				
			}
		},
		onLoad() {
			_self = this;
			
		},
		created() {
			// 通知
			uni.$on('demoScanApp',(res)=>{
				_self.$ctmobile.dialog.alertConfirm({
					title: '扫码成功',
					content: res
				})
			})
		},
		onUnload() {
			uni.$off('demoScanApp')
		},
		methods: {
			scan(e) {
					_self.$refs.scan.ctScanCodeOnlyFromCamera()
			},
			ctScanCodeOnlyFromCamera(e) {
				_self.$ctmobile.dialog.alertConfirm({
					title: '扫码成功',
					content: e.result
				})
			}
		}
	}
</script>

<style lang="scss">
	.demo {
		width: 100vw;
	}
</style>
```

### [app扫码](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#app扫码)

```vue
<template>
	<view class="demo-page">
		<ct-demo-card title="app扫码">
			<ct-ui-button @click="scan('app')">扫码</ct-ui-button>
		</ct-demo-card>
		<ct-expand-scan ref="scan" />
	</view>
</template>

<script>
	var _self;
	export default {
		data() {
			return {
				
			}
		},
		onLoad() {
			_self = this;
			
		},
		created() {
			// 通知
			uni.$on('demoScanApp',(res)=>{
				_self.$ctmobile.dialog.alertConfirm({
					title: '扫码成功',
					content: res
				})
			})
		},
		onUnload() {
			uni.$off('demoScanApp')
		},
		methods: {
			scan(e) {
				uni.navigateTo({
						url: 'expandScanApp'
				})
			},
		}
	}
</script>

<style lang="scss">
	.demo {
		width: 100vw;
	}
</style>
```

### [API](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#api)

#### [Events](http://mid.chinatowercom.cn:18080/appGuide/extend/scan.html#events)

| 事件名                   | 说明                     | 返回值 |
| ------------------------ | ------------------------ | ------ |
| ctScanCode               | 允许从相机或相册扫码成功 | —      |
| ctScanCodeOnlyFromCamera | 只允许从相机扫码成功     | —      |