# [NPM 铁塔私服](http://mid.chinatowercom.cn:18080/appGuide/guide/npm.html#npm-铁塔私服)

铁塔 China Tower NPM 私服是铁塔 🗼 内部私有库，主要用于存放私有 Packages，便于管理内部的业务组件或者模块。

## [设置私有镜像源](http://mid.chinatowercom.cn:18080/appGuide/guide/npm.html#设置私有镜像源)

- **镜像源 URL：** http://10.38.77.5:8081/repository/npm-public/

### [设置方式](http://mid.chinatowercom.cn:18080/appGuide/guide/npm.html#设置方式)

方式一

```bash
# .npmrc 文件，可先使用该方式
# .npmrc 在项目根目录下创建该文件
# 默认的 registry 可配置成自己熟悉的镜像源

# 注意：每条命令占一行（node version： v14+）

registry=https://registry.npmjs.org/
@ct:registry=http://10.38.77.5:8081/repository/npm-public/
```

方式二

```bash
# 持久使用（一）
npm config set registry http://10.38.77.5:8081/repository/npm-public/
# npm 源别名（二）
npm install -g ctnpm --registry=http://10.38.77.5:8081/repository/npm-public/
```

方式三

```bash
# 通过安装 npm 源管理模块 nrm，进行快速切换不同源
# 全局安装nrm
npm i nrm -g
# 添加镜像
# nrm add <registry name> <registry url>
nrm add china-tower http://10.38.77.5:8081/repository/npm-public/
# 使用镜像
nrm use china-tower

# 通过 nrm ls 查看所有的镜像
# 列出所有的镜像
nrm ls

# 注：首次切换 npm 源需安装 nrm 模块，之后切换只需执行 nrm use china-tower 命令即可；
# 查看当前 npm 源，执行 npm config get registry 命令。
# 若执行第二步的时候报路径类型的错，则是 nrm 本身的问题，需要找到路径为“项目路径\nodejs\node_global\node_modules\nrm\cli.js”的文件，
# 将”const NRMRC = path.join(process.env.HOME, '.nrmrc');”
# 改为 “const NRMRC = path.join(process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'], '.nrmrc');”
```